!function(){"use strict";var e,t={396:function(){var e=window.wp.blocks,t=window.wp.i18n,r=window.wp.element,l=window.wp.blockEditor,a=window.wp.components;(0,e.registerBlockType)("vestorfilter/map",{apiVersion:2,title:(0,t.__)("Map","vestorfilter"),description:(0,t.__)("Adds an embedded property map to your page content.","vestorfilter"),category:"widgets",icon:"location-alt",attributes:{filterParams:{type:"string"},centerLat:{type:"string"},centerLon:{type:"string"},zoom:{type:"integer"},labels:{type:"boolean"},height:{type:"integer"}},edit:function(e){var o,n;let{attributes:s,setAttributes:i}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(l.InspectorControls,{key:"setting"},(0,r.createElement)("div",{id:"vestorfilter-map-controls",className:"wp-block-vestorfilter-map__sidebar"},(0,r.createElement)("fieldset",null,(0,r.createElement)("legend",{className:"screen-reader-text"},(0,t.__)("Layout settings","vestorfilter")),(0,r.createElement)(a.RangeControl,{className:"wp-block-vestorfilter-map__height-control",label:"Block height (% Ratio)",value:Number(null!==(o=s.height)&&void 0!==o?o:100),onChange:e=>i({height:e}),min:50,max:150,step:5}))))),(0,r.createElement)("div",(0,l.useBlockProps)(),(0,r.createElement)(a.TextControl,{className:"wp-block-vestorfilter-map__pasted-url",onChange:e=>(e=>{let{pastedUrl:t}=e;if(0===t.length)return;try{t=new URL(t)}catch(e){t=!1}if(!t||!t.searchParams.has("l"))return void alert("Please enter a valid url generated from the Map share function.");let r=new URL(window.location.protocol+window.location.host+"/wp-json/vestorfilter/v1/search/get_shortlink_params");r.searchParams.set("l",t.searchParams.get("l")),t.searchParams.has("g")&&r.searchParams.set("g",t.searchParams.get("g")),fetch(r.toString(),{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{let t=new URLSearchParams;for(let r in e.filters)e.filters.hasOwnProperty(r)&&t.set(r,e.filters[r]);i({filterParams:t.toString(),centerLat:e.lat+"",centerLon:e.lon+"",zoom:parseInt(e.zoom)})})).catch((e=>{alert("There was an error retrieving this search, please ensure the URL is correct and try again.")}))})({pastedUrl:e}),placeholder:(0,t.__)("Paste a URL copied from a map","vestorfilter")}),(0,r.createElement)("p",{className:"wp-block-vestorfilter-map__text"},"Or enter details manually..."),(0,r.createElement)("div",{className:"wp-block-vestorfilter-map__fields"},(0,r.createElement)("div",{className:"wp-block-vestorfilter-map__field-row wp-block-vestorfilter-map__field-row--filters"},(0,r.createElement)("label",null,"Filters"),(0,r.createElement)(a.TextControl,{className:"wp-block-vestorfilter-map__filter-params",value:s.filterParams,onChange:e=>i({filterParams:e}),placeholder:(0,t.__)("Enter query parameters here","vestorfilter")})),(0,r.createElement)("div",{className:"wp-block-vestorfilter-map__field-row wp-block-vestorfilter-map__field-row--center"},(0,r.createElement)("label",null,"Map center"),(0,r.createElement)(a.TextControl,{className:"wp-block-vestorfilter-map__center-lat",value:s.centerLat,type:"number",step:"0.00001",onChange:e=>i({centerLat:e}),placeholder:(0,t.__)("Latitude","vestorfilter")})),(0,r.createElement)("div",{className:"wp-block-vestorfilter-map__field-row wp-block-vestorfilter-map__field-row--center"},(0,r.createElement)("label",null,"Map center"),(0,r.createElement)(a.TextControl,{className:"wp-block-vestorfilter-map__center-lon",value:s.centerLon,type:"number",step:"0.00001",onChange:e=>i({centerLon:e}),placeholder:(0,t.__)("Longitude","vestorfilter")})),(0,r.createElement)("div",{className:"wp-block-vestorfilter-map__field-row wp-block-vestorfilter-map__field-row--zoom"},(0,r.createElement)((()=>(0,r.createElement)(a.RangeControl,{className:"wp-block-vestorfilter-map__zoom",label:(0,t.__)("Zoom level","vestorfilter"),value:Number(s.zoom),onChange:e=>{i({zoom:e})},min:8,max:20,step:1,help:(0,t.__)("A smaller number shows a wider area, larger is zoomed in","vestorfilter")})),null)),(0,r.createElement)("div",{className:"wp-block-vestorfilter-map__field-row wp-block-vestorfilter-map__field-row--labels"},(0,r.createElement)(a.ToggleControl,{label:"Show price labels",className:"wp-block-vestorfilter-map__labels",onChange:e=>{i({labels:e})},checked:null!==(n=s.labels)&&void 0!==n&&n})))))},save:function(){return null}})}},r={};function l(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,l),o.exports}l.m=t,e=[],l.O=function(t,r,a,o){if(!r){var n=1/0;for(m=0;m<e.length;m++){r=e[m][0],a=e[m][1],o=e[m][2];for(var s=!0,i=0;i<r.length;i++)(!1&o||n>=o)&&Object.keys(l.O).every((function(e){return l.O[e](r[i])}))?r.splice(i--,1):(s=!1,o<n&&(n=o));if(s){e.splice(m--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[r,a,o]},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,46:0};l.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,n=r[0],s=r[1],i=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(i)var m=i(l)}for(t&&t(r);c<n.length;c++)o=n[c],l.o(e,o)&&e[o]&&e[o][0](),e[n[c]]=0;return l.O(m)},r=self.webpackChunkmap=self.webpackChunkmap||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var a=l.O(void 0,[46],(function(){return l(396)}));a=l.O(a)}();